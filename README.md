# cfg-mini-project-sephora-best-selling-product-tracker

This project was based on the skills I have learnt on the Data & SQL 8-week beginners course by CodeFristGirls (Sponsored by Aviva). 

# Project Objectives

Individual project that requires to fufill all core requirements and at least 2 advanced requirements. 

Project core requirements:

❎ Create relational DB with minimum 5 tables

❎ Set Primary and Foreign Key constraints to create relations between the tables

❎ Using any type of joins, create a view that combines multiple tables in a logical way

❎ In the DB, create a stored function that can be applied to a query in the DB

❎ Prepare an example query with a subquery to demonstrate how to extract data from the DB for analysis

❎ Create DB diagram where all table relations are shown

Project advanced requirements (include 2-3 minimum):

❎ In the DB, create a stored procedure and demonstrate how it runs

❎ In the DB, create a trigger and demonstrate how it runs

❎ In the DB, create an event and demonstrate how it runs

❎ Create a view that uses at least 3-4 base tables; prepare and demonstrate a query that uses the view to produce a logically arranged result set for analysis

❎ Prepare an example query with group by and having to demonstrate how to extract data from the DB for analysis

Present a 3 minute presentation to the group explaining the idea behind the DB (use DB diagram), what it is for and how it is expected to be used. Run sample queries to demonstrate how the functions, stored procedures etc work. Show snippets of data stored in the tables.

# Database: Sephora Best Selling Product Tracker

- The database consists of six core tables: Brands, Categories, Suppliers, Products, Sales, and a view for Monthly Revenue per Product.
- The Products table holds details about each product, such as price, stock, and its foreign key relationships to Brands, Categories, and Suppliers.
- Sales captures transaction details for each product, linking sales data back to the Products table.

Schema: This picture shows the relationships between the tables

![DIAGRAM - SephoraBestSellers](https://github.com/user-attachments/assets/31d0599a-2eb7-498e-8a4c-d22fa9c268da)

# Create a View

This view shows columns containing the sales data of the product, product ID and the total revenue generated per month. 

<img width="428" alt="Screenshot 2024-10-29 at 8 27 54 PM" src="https://github.com/user-attachments/assets/81725ec1-17a3-40f4-8ff8-f0a4863ce75b">

This can be a great way to quickly analyse products sales per month.

# Query with Subquery

This is an example of how I want to extract some data that shows the product with sales that are above average.

<img width="642" alt="Screenshot 2024-10-29 at 8 30 32 PM" src="https://github.com/user-attachments/assets/415a9660-0c89-41d4-b8e0-cf9976eabe41">


# Stored Procedure - Retrieve Sales by Date Range

This demonstrates the stored procedure GetSalesByDateRange. This procedure retrieves sales data within a specified date range, including product names, brand names, and sales details. Here's the procedure code:

<img width="615" alt="Screenshot 2024-10-29 at 8 21 23 PM" src="https://github.com/user-attachments/assets/5f6c5a15-25b9-4901-af99-7618991ed6e0">
<img width="466" alt="Screenshot 2024-10-29 at 8 23 56 PM" src="https://github.com/user-attachments/assets/90f74c96-7f8c-4b98-b4df-5baf11c455d7">

This query outputs sales that occurred between January and March 2024, helping the company track performance over specific periods.

# Stored Function - Total Sales Revenue by Product

I also implemented a stored function called GetTotalSalesRevenueByProduct. This function calculates the total sales revenue for a given product. By passing the Product_ID as an input, it multiplies the quantity sold by the product price and returns the total revenue.

For example, here's the query to calculate the total revenue for Product_ID = 13:

<img width="730" alt="Screenshot 2024-10-29 at 8 26 43 PM" src="https://github.com/user-attachments/assets/cc2d2236-8fed-43f3-b4c4-2f38a4cfe766">

This returns the total revenue generated by the product 'Easy Bake Loose Powder'.

# Trigger

To manage inventory automatically, I created a trigger called UpdateStockAfterSale. This trigger fires after every sale and decreases the stock in the Products table according to the quantity sold.

For instance, if we insert a sale for 10 units of Easy Bake Loose Powder:

<img width="578" alt="Screenshot 2024-10-29 at 8 33 02 PM" src="https://github.com/user-attachments/assets/3222df20-becb-4b24-9716-64068012e221">

The trigger automatically updates the stock in the Products table by subtracting the quantity sold, ensuring inventory is always up to date.
